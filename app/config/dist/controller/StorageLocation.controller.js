sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/m/MessageBox","sap/m/MessageToast"],function(e,t,o,s,a){"use strict";let i;return e.extend("config.controller.StorageLocation",{onInit:function(){},onCreate:function(){var e=this.getView();const o={LocationID:"",LocationName:""};const s=new t(o);e.setModel(s,"slocModel");if(!this._oDialogItem){this._oDialogItem=sap.ui.xmlfragment("config.fragments.addStorageLocation",this);e.addDependent(this._oDialogItem)}this._oDialogItem.open()},handleValueHelpClose1:function(){this._oDialogItem.close()},onSave:function(){var e=this.getView();var t=this.byId("slocTable");var o=this.getView().getModel("slocModel").getData();let s=o.LocationID;let a=o.LocationName;let i={LocationID:s,LocationName:a};let n=this.getView().getModel();let l=n.bindList("/StorageLocation");l.create(i,true);l.attachCreateCompleted(o=>{let s=o.getParameters();if(s.success){sap.m.MessageToast.show("Storage Location added successfully");e.getModel().refresh();t.getBinding("items").refresh()}else{let e=s.context;let t=e.oModel.mMessages[""];sap.m.MessageBox.error(t[t.length-1].message)}});this._oDialogItem.close();t.removeSelections()},onEdit:function(){var e=this.byId("slocTable");var o=e.getSelectedItems();if(o.length!==1){a.show("Please select exactly one item to edit.");return}var s=o[0];var i=s.getBindingContext();var n=i.getObject();const l=new t(n);this.getView().setModel(l,"slocModel");if(!this._oDialog){this._oDialog=sap.ui.xmlfragment("config.fragments.updateLocation",this);this.getView().addDependent(this._oDialog)}this._oDialog.open()},onUpdate:async function(){var e=this.getView();var t=this.byId("slocTable");var o=e.getModel();var s=e.getModel("slocModel").getData();let a=s.LocationID;let i=s.LocationName;var n=t.getSelectedItems();if(n.length!==1){sap.m.MessageToast.show("Please select one item to update.");return}var l=n[0];var c=l.getBindingContext();let r=this.getOwnerComponent().getModel();if(c.getProperty("LocationID")===a){c.setProperty("LocationName",i);try{await r.submitBatch("update");sap.m.MessageToast.show("Item updated successfully.");this._oDialog.close();t.removeSelections()}catch(e){sap.m.MessageToast.show("Error updating item: "+e.message)}}else{sap.m.MessageToast.show("The selected items Location ID does not match the update data.")}},handleValueHelpClose2:function(){var e=this.byId("slocTable");this._oDialog.close();e.removeSelections()},onDelete:function(){let e=this.byId("slocTable");let t=e.getSelectedItems();if(!t.length){a.show("Please Select at least one row ");return}const o=this;sap.ui.require(["sap/m/MessageBox"],function(s){s.confirm("Are you sure ,you want  to delete ?",{title:"Confirm ",onClose:function(a){if(a===s.Action.OK){o.deleteSelectedItems(t)}else{e.removeSelections();sap.m.MessageToast.show("Deletion canceled")}}})})},deleteSelectedItems:function(e){let t=e.length;let o=t===1?"Record":"Records";e.forEach(function(e){const t=e.getBindingContext();t.delete().then(function(){a.show(`${o} deleted sucessfully`)}).catch(function(e){s.error("Error deleting item: "+e.message)})})}})});
//# sourceMappingURL=StorageLocation.controller.js.map