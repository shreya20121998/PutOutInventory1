sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/m/MessageBox","sap/m/MessageToast"],function(e,t,o,a,i){"use strict";let s;return e.extend("config.controller.MaterialGroup",{onInit:function(){},_onCreateMaterialEntryDialog:function(){var e=this.getView();if(!this._oDialogItem){this._oDialogItem=sap.ui.xmlfragment("config.fragments.createMaterialGroup",this);e.addDependent(this._oDialogItem)}this._oDialogItem.open()},_handleValueHelpClose1:function(){this._oDialogItem.close()},_onSaveMaterialEntry:function(){var e=this.byId("materialGroupTable");let t=sap.ui.getCore().byId("typeField").getValue();let o=sap.ui.getCore().byId("locationIdField").getValue();let a=sap.ui.getCore().byId("ZcodeField").getValue();let i=sap.ui.getCore().byId("usabityInput").getValue();var s=this.getView().getModel();let l={ID:"",Type:t,Usability:i,Zcode:a,StorageLocation_LocationID:o};let n=s.bindList("/Category");n.create(l);this._oDialogItem.close();this.getView().getModel().refresh();setTimeout(()=>{sap.m.MessageToast.show("Data added successfully");e.removeSelections()},1e3)},_showLocationValueHelp:function(e){this.oSource=e.getSource();if(!this._LocationDialog){this._LocationDialog=sap.ui.xmlfragment("config.fragments.locationValueHelp",this);this.getView().addDependent(this._LocationDialog)}this._LocationDialog.open();if(this._LocationDialog){this._LocationDialog.getBinding("items").filter([])}},onLocationValueHelpClose:function(e){let t=e.getParameter("selectedItem");let o=t.getBindingContext().getObject();let a=this.oSource;a.setValue(o.LocationID);if(!t){if(that._LocationDialog){that._LocationDialog.destroy();that._LocationDialog=null}return}},_onEditMaterialDialog:function(){var e=this.byId("materialGroupTable");var t=e.getSelectedItems();if(t.length!==1){i.show("Please select a row first");return}var o=t[0];var a=o.getBindingContext();var s=a.getObject();if(!this._oDialog){this._oDialog=sap.ui.xmlfragment("config.fragments.updateMaterialGroup",this);this.getView().addDependent(this._oDialog)}let l=new sap.ui.model.json.JSONModel(s);this._oDialog.setModel(l,"editMaintainData");this._oDialog.open()},nUpdateMaterialGroupEntry:async function(){debugger;var e=this.getView();var t=this.byId("materialGroupTable");let o=sap.ui.getCore().byId("editIDInput").getValue();let a=sap.ui.getCore().byId("editCatgInput").getValue();let i=sap.ui.getCore().byId("editUsabilityInput").getValue();let s=sap.ui.getCore().byId("fieldTypeComboBox1").getValue();let l=sap.ui.getCore().byId("editLocationInput").getValue();var n=t.getSelectedItems();if(n.length!==1){sap.m.MessageToast.show("Please select one item to update.");return}var r=n[0];var g=r.getBindingContext();let u=this.getOwnerComponent().getModel();if(g.getProperty("ID")===o){g.setProperty("Type",a);g.setProperty("Usability",i);g.setProperty("StorageLocation_LocationID",l);g.setProperty("Zcode",s);try{await u.submitBatch("update");sap.m.MessageToast.show("Item updated successfully.");this._oDialog.close();t.removeSelections()}catch(e){sap.m.MessageToast.show("Error updating item: "+e.message)}}else{sap.m.MessageToast.show("The selected items StatusCode does not match the update data.")}},_onUpdateMaterialGroupEntry:async function(){debugger;var e=this.getView();var t=this.byId("materialGroupTable");var o=t.getSelectedItems();if(o.length!==1){sap.m.MessageToast.show("Please select one item to update.");return}var a=o[0];var i=a.getBindingContext();let s=sap.ui.getCore().byId("editIDInput").getValue();let l=sap.ui.getCore().byId("editCatgInput").getValue();let n=sap.ui.getCore().byId("editUsabilityInput").getValue();let r=sap.ui.getCore().byId("fieldTypeComboBox1").getValue();let g=sap.ui.getCore().byId("editLocationInput").getValue();i.setProperty("ID",s);i.setProperty("Type",l);i.setProperty("Usability",n);i.setProperty("Zcode",r);i.setProperty("StorageLocation_LocationID",g);let u=this.getOwnerComponent().getModel();try{await u.submitBatch("updateGroup");t.getBinding("items").refresh();sap.m.MessageToast.show("Item updated successfully.");this._oDialog.close();t.removeSelections()}catch(e){sap.m.MessageToast.show("Error updating item: "+e.message)}},_handleValueHelpClose2:function(){var e=this.byId("materialGroupTable");this._oDialog.close();e.removeSelections()},_onDeleteMaterialEntry:function(){let e=this.byId("materialGroupTable");let t=e.getSelectedItems();if(!t.length){i.show("Please Select at least one row ");return}const o=this;sap.ui.require(["sap/m/MessageBox"],function(a){a.confirm("Are you sure ,you want  to delete ?",{title:"Confirm ",onClose:function(i){if(i===a.Action.OK){o.deleteSelectedItems(t)}else{e.removeSelections();sap.m.MessageToast.show("Deletion canceled")}}})})},deleteSelectedItems:function(e){let t=e.length;let o=t===1?"Record":"Records";e.forEach(function(e){const t=e.getBindingContext();t.delete().then(function(){i.show(`${o} deleted sucessfully`)}).catch(function(e){a.error("Error deleting item: "+e.message)})})}})});
//# sourceMappingURL=MaterialGroup.controller.js.map