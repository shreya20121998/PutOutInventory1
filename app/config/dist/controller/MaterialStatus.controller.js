sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/m/MessageBox","sap/m/MessageToast"],function(e,t,s,a,o){"use strict";let i;return e.extend("config.controller.MaterialStatus",{onInit:function(){},onCreate:function(){var e=this.getView();const s={StatusCode:"",Description:""};let a=new t(s);e.setModel(a,"addMaterialStatusModel");if(!this._oDialogItem){this._oDialogItem=sap.ui.xmlfragment("config.fragments.AddMaterialStatus",this);e.addDependent(this._oDialogItem)}this._oDialogItem.open()},handleValueHelpClose1:function(){this._oDialogItem.close()},onSave:function(){var e=this.getView();var t=this.byId("materialStatusTable");var s=this.getView().getModel("addMaterialStatusModel").getData();let a=s.StatusCode;let o=s.Description;let i={StatusCode:a,Description:o};let l=this.getView().getModel();let n=l.bindList("/Material_Status");n.create(i,true);n.attachCreateCompleted(s=>{let a=s.getParameters();if(a.success){setTimeout(()=>{sap.m.MessageToast.show("Material Status added successfully")},1e3);e.getModel().refresh();t.getBinding("items").refresh()}else{let e=a.context;let t=e.oModel.mMessages[""];sap.m.MessageBox.error(t[t.length-1].message)}});this._oDialogItem.close();t.removeSelections()},onEdit:function(){var e=this.byId("materialStatusTable");var s=e.getSelectedItems();if(s.length!==1){o.show("Please select exactly one item to edit.");return}var a=s[0];var i=a.getBindingContext();var l=i.getObject();let n=new t(l);this.getView().setModel(n,"editMaterialStatusModel");if(!this._oDialog){this._oDialog=sap.ui.xmlfragment("config.fragments.UpdateMaterialStatus",this);this.getView().addDependent(this._oDialog)}this._oDialog.open()},onUpdate:async function(){var e=this.getView();var t=this.byId("materialStatusTable");var s=e.getModel();var a=e.getModel("editMaterialStatusModel").getData();let o=a.StatusCode;let i=a.Description;var l=t.getSelectedItems();if(l.length!==1){sap.m.MessageToast.show("Please select one item to update.");return}var n=l[0];var r=n.getBindingContext();let d=this.getOwnerComponent().getModel();if(r.getProperty("StatusCode")===o){r.setProperty("Description",i);try{await d.submitBatch("update");sap.m.MessageToast.show("Item updated successfully.");this._oDialog.close();t.removeSelections()}catch(e){sap.m.MessageToast.show("Error updating item: "+e.message)}}else{sap.m.MessageToast.show("The selected items StatusCode does not match the update data.")}},handleValueHelpClose2:function(){var e=this.byId("materialStatusTable");this._oDialog.close();e.removeSelections()},onDelete:function(){let e=this.byId("materialStatusTable");let t=e.getSelectedItems();if(!t.length){o.show("Please Select at least one row ");return}const s=this;sap.ui.require(["sap/m/MessageBox"],function(a){a.confirm("Are you sure ,you want  to delete ?",{title:"Confirm ",onClose:function(o){if(o===a.Action.OK){s.deleteSelectedItems(t)}else{e.removeSelections();sap.m.MessageToast.show("Deletion canceled")}}})})},deleteSelectedItems:function(e){let t=e.length;let s=t===1?"Record":"Records";e.forEach(function(e){const t=e.getBindingContext();t.delete().then(function(){o.show(`${s} deleted sucessfully`)}).catch(function(e){a.error("Error deleting item: "+e.message)})})}})});
//# sourceMappingURL=MaterialStatus.controller.js.map